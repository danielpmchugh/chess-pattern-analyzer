# Chess Pattern Analyzer API - Environment Variables
# Copy this file to .env and update with your actual values

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_NAME="Chess Pattern Analyzer"
APP_VERSION="1.0.0"
ENVIRONMENT=development  # development, staging, production
DEBUG=true

# ============================================================================
# API CONFIGURATION
# ============================================================================
API_PREFIX=/api/v1
API_TIMEOUT=25

# Server (for local development)
HOST=0.0.0.0
PORT=8000

# ============================================================================
# DATABASE - Neon PostgreSQL
# ============================================================================
# Local development (with docker-compose)
DATABASE_URL=postgresql://developer:local_dev_password@localhost:5432/chess_analyzer

# Production (Neon PostgreSQL - get from Neon dashboard)
# DATABASE_URL=postgresql://username:password@ep-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require

# Database pool settings (optimized for Neon free tier)
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=2
DATABASE_POOL_RECYCLE=3600
DATABASE_POOL_PRE_PING=true
DATABASE_ECHO=false

# ============================================================================
# REDIS - Upstash Redis
# ============================================================================
# Local development (with docker-compose)
REDIS_URL=redis://localhost:6379/0

# Production (Upstash Redis - get from Upstash dashboard)
# REDIS_URL=rediss://default:xxxx@loving-fish-12345.upstash.io:6379

# Redis connection settings
REDIS_MAX_CONNECTIONS=5
REDIS_DECODE_RESPONSES=true
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================================================
# CHESS.COM API
# ============================================================================
CHESS_COM_API_BASE_URL=https://api.chess.com/pub
CHESS_COM_API_TIMEOUT=10
CHESS_COM_RATE_LIMIT=100

# ============================================================================
# STOCKFISH CHESS ENGINE
# ============================================================================
STOCKFISH_PATH=/usr/local/bin/stockfish
STOCKFISH_DEPTH=18
STOCKFISH_THREADS=2
STOCKFISH_HASH=128
STOCKFISH_TIMEOUT=5

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_TIER_ANONYMOUS=20      # requests per hour
RATE_LIMIT_TIER_FREE=100          # requests per hour
RATE_LIMIT_TIER_PRO=1000          # requests per hour

# ============================================================================
# SESSION MANAGEMENT
# ============================================================================
SESSION_TTL_HOURS=24
MAX_SESSIONS=1000

# ============================================================================
# SECURITY
# ============================================================================
# Generate a secure secret key for production:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=change_this_to_a_secure_random_string_in_production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# CACHING STRATEGY
# ============================================================================
CACHE_ENABLED=true
CACHE_TTL_GAMES=3600         # 1 hour for game data
CACHE_TTL_ANALYSIS=86400     # 24 hours for analysis results
CACHE_TTL_USER_PROFILE=1800  # 30 minutes for user profiles

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# For local development
CORS_ORIGINS=["http://localhost:3000", "http://localhost:3001"]

# For production (update with your actual frontend domains)
# CORS_ORIGINS=["https://your-app.vercel.app", "https://www.yourdomain.com"]

# Trusted hosts (production only)
ALLOWED_HOSTS=[]

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# Sentry (error tracking) - optional
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================================================
# RAILWAY DEPLOYMENT (Auto-populated by Railway)
# ============================================================================
RAILWAY_ENVIRONMENT=
RAILWAY_PROJECT_ID=
RAILWAY_SERVICE_ID=

# ============================================================================
# FEATURE FLAGS
# ============================================================================
ENABLE_SWAGGER_UI=true
ENABLE_METRICS=true
ENABLE_DETAILED_ERRORS=false  # Set to false in production

# ============================================================================
# NOTES
# ============================================================================
# 1. Never commit .env file to version control
# 2. Use strong, unique SECRET_KEY in production
# 3. Update CORS_ORIGINS with your actual frontend domains
# 4. Set ENABLE_DETAILED_ERRORS=false in production for security
# 5. Get production DATABASE_URL from Neon: https://neon.tech
# 6. Get production REDIS_URL from Upstash: https://upstash.com
